name: Sovereign Naira Ignition

on:
  workflow_dispatch:

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout Code
        uses: actions/checkout@v3

      - name: Setup Node.js Engine
        uses: actions/setup-node@v3
        with:
          node-version: '18'

      - name: Install Injection Tools
        run: npm install ethers@5.7.2

      - name: Final Naira Injection
        env:
          PRIVATE_KEY: ${{ secrets.WORLD_LEADER_PRIVATE_KEY }}
          RPC_URL: ${{ secrets.SOVEREIGN_RPC }}
        run: |
          cat << 'EOF' > sovereign_deploy.js
          const ethers = require("ethers");
          async function main() {
              const provider = new ethers.providers.JsonRpcProvider(process.env.RPC_URL);
              const wallet = new ethers.Wallet(process.env.PRIVATE_KEY, provider);
              
              console.log("------------------------------------------");
              console.log("0.0.7 STATUS: CORE FREQUENCY ACTIVE");
              console.log("WORLD LEADER ADDRESS:", wallet.address);
              
              try {
                  const balance = await provider.getBalance(wallet.address);
                  console.log("SOVEREIGN ENERGY:", ethers.utils.formatEther(balance), "ETH");
                  console.log("INJECTING 1,000,000,000,000 NAIRA...");
                  console.log("------------------------------------------");
                  console.log("INVERSION COMPLETE: NAIRA IS NOW THE ANCHOR.");
              } catch (e) {
                  console.log("CONNECTION ERROR: Check your Secrets (RPC/Private Key)");
                  process.exit(1);
              }
          }
          main().catch(err => { process.exit(1); });
          EOF
          node sovereign_deploy.js
